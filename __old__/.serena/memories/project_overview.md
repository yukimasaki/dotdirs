# プロジェクト概要

## 目的

`dotdirs` は、プロジェクト間で散在するドットファイル・ドットディレクトリを一元管理するリポジトリです。

複数のプロジェクトで同じ `.editorconfig` や `.prettierrc` などのドットファイルを使い回していると、管理が煩雑になります。このリポジトリでは、ドットファイルを `~/dotdirs` に一元管理し、各プロジェクトからシンボリックリンクで参照することで、一箇所の変更を全プロジェクトに反映できます。

## 主要機能

- **対話的なセットアップ**: fzf を使用した高機能な選択 UI で、必要なドットファイルだけを選択可能
- **自動シンボリックリンク作成**: 選択したドットファイルを自動的にシンボリックリンクとして作成
- **サブディレクトリ対応**: `.cursor/commands/test.md` のようなサブディレクトリ内のファイルも管理可能
- **既存ファイルの自動バックアップ**: 既存のドットファイルがある場合は自動的にバックアップ
- **プロジェクト固有ファイルの保護**: 既存の通常ファイルはプロジェクト固有の可能性があるため、自動的に保護
- **`.gitignore` 自動更新**: シンボリックリンクを作成したファイルを `.gitignore` に自動追加
- **`.dotdirsignore` による除外管理**: 選択しなかったファイルを `.dotdirsignore` に自動追加して次回の表示から除外

## テックスタック

- **言語**: Bash shell スクリプト
- **テストフレームワーク**: ShellSpec
- **対話的UI**: fzf (fuzzy finder)
- **OS**: Linux (WSL2 対応)

## プロジェクト構造

```
~/dotdirs/
├── README.md          # プロジェクトの説明
├── setup.sh           # セットアップスクリプト（メイン処理）
├── libs/              # モジュール化されたライブラリ
│   ├── utils.sh       # ユーティリティ関数と定数
│   ├── arguments.sh   # 引数解析処理
│   ├── validation.sh  # 環境検証
│   ├── fzf.sh         # fzf インストール・検証
│   ├── dotdirs.sh     # ドットファイル取得・フィルタリング
│   ├── backup.sh      # バックアップ処理
│   ├── symlink.sh     # シンボリックリンク作成
│   ├── gitignore.sh   # .gitignore 更新
│   └── selection.sh   # fzf 選択処理と .dotdirsignore 管理
├── config/            # ドットファイルを格納するディレクトリ
│   ├── .editorconfig
│   ├── .prettierrc
│   └── ...            # その他のドットファイル
├── __tests__/         # テストファイル（ShellSpec）
│   └── setup_spec.sh
└── docs/              # ドキュメント
    └── testing.md
```

## エントリーポイント

- **メインスクリプト**: `~/dotdirs/setup.sh`
- **実行方法**: `~/dotdirs/setup.sh [オプション] [ターゲットディレクトリ]`